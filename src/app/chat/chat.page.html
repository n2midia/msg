<ion-header no-shadow translucent="true">
  <ion-toolbar>
      <ion-buttons slot="start">
          <ion-menu-button></ion-menu-button>
        </ion-buttons>

        <ion-list lines="none">
            <ion-item *ngIf="chatData">
        
                <ion-avatar slot="start" style="position:relative">
                    <img src="{{chatData[otherUid]?.photoURL}}" style="width:120px">
                    <div *ngIf="user_presence | async as presence">
                        <span class="onlineOffline_icon" [ngClass]="presence.status"></span>
                      </div>
                  </ion-avatar>
                  <ion-label item-left>
        
                    <p>
                        {{chatData[otherUid]?.displayName}}
                    </p>

                </ion-label>

            </ion-item>
        </ion-list>

  </ion-toolbar>
</ion-header>

<ion-content>
 
        <ion-list>
            <ion-item *ngFor="let msg of chatData?.messages; trackBy: trackByCreated" lines="none">
                <ion-thumbnail *ngIf="me.uid===msg.uid" slot="end">
                    <img [src]="chatData[me.uid].photoURL">
                  </ion-thumbnail>

                  <ion-thumbnail *ngIf="me.uid!=msg.uid" slot="start">
                      <img [src]="chatData[msg.uid].photoURL">
                    </ion-thumbnail>

                    <ion-label [ngClass]="me.uid===msg.uid ? 'text-right' : 'text-left'">
                      <h3>{{ msg.content }}</h3>
                      <p>{{ msg.createdAt | chatTime }}</p>
                    </ion-label>

            </ion-item>
            <ion-item *ngIf="sending">...</ion-item>

            
        </ion-list>

  
      
</ion-content>

<ion-footer translucent>
    <ion-item>
        <ion-button slot="end" fill="clear" (click)="submit()">
            <ion-icon slot="icon-only" name="send" expand="icon-only"></ion-icon>
        </ion-button>
      <ion-input type="text" placeholder="Write a message..." [(ngModel)]="user_input" (keyup.enter)="submit()"></ion-input>
    </ion-item>
</ion-footer>
